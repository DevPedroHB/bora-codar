import { ApexOptions } from "apexcharts";
import dynamic from "next/dynamic";
import { ChartControls, ExchangeRateChartContainer } from "./styles";

const Chart = dynamic(() => import("react-apexcharts"), {
  ssr: false,
});

const series: ApexOptions["series"] = [
  {
    name: "Cotação",
    data: [
      [1646265600000, 5.032398],
      [1646352000000, 5.062816],
      [1646438400000, 5.056623],
      [1646524800000, 5.064146],
      [1646611200000, 5.112015],
      [1646697600000, 5.060398],
      [1646784000000, 5.013197],
      [1646870400000, 5.011202],
      [1646956800000, 5.075041],
      [1647043200000, 5.075041],
      [1647129600000, 5.074995],
      [1647216000000, 5.123101],
      [1647302400000, 5.164706],
      [1647388800000, 5.078698],
      [1647475200000, 5.040901],
      [1647561600000, 5.02375],
      [1647648000000, 5.02375],
      [1647734400000, 5.01955],
      [1647820800000, 4.936502],
      [1647907200000, 4.911498],
      [1647993600000, 4.825695],
      [1648080000000, 4.827799],
      [1648166400000, 4.743204],
      [1648252800000, 4.743173],
      [1648339200000, 4.743201],
      [1648425600000, 4.765601],
      [1648512000000, 4.7577],
      [1648598400000, 4.771203],
      [1648684800000, 4.739298],
      [1648771200000, 4.658887],
      [1648857600000, 4.660812],
      [1648944000000, 4.658703],
      [1649030400000, 4.595298],
      [1649116800000, 4.652312],
      [1649203200000, 4.7167],
      [1649289600000, 4.753598],
      [1649376000000, 4.699604],
      [1649462400000, 4.699604],
      [1649548800000, 4.699603],
      [1649635200000, 4.695098],
      [1649721600000, 4.674596],
      [1649808000000, 4.691703],
      [1649894400000, 4.7025],
      [1649980800000, 4.702104],
      [1650067200000, 4.702104],
      [1650153600000, 4.702099],
      [1650240000000, 4.653496],
      [1650326400000, 4.666503],
      [1650412800000, 4.622302],
      [1650499200000, 4.622302],
      [1650585600000, 4.796678],
      [1650672000000, 4.798921],
      [1650758400000, 4.796698],
      [1650844800000, 4.877702],
      [1650931200000, 4.999297],
      [1651017600000, 4.9651],
      [1651104000000, 4.939297],
      [1651190400000, 4.97275],
      [1651276800000, 4.97275],
      [1651363200000, 4.972799],
      [1651449600000, 5.0862],
      [1651536000000, 4.960556],
      [1651622400000, 4.920303],
      [1651708800000, 5.029504],
      [1651795200000, 5.081904],
      [1651881600000, 5.081904],
      [1651968000000, 5.081902],
      [1652054400000, 5.162399],
      [1652140800000, 5.132803],
      [1652227200000, 5.138057],
      [1652313600000, 5.134898],
      [1652400000000, 5.059804],
      [1652486400000, 5.059804],
      [1652572800000, 5.059803],
      [1652659200000, 5.061202],
      [1652745600000, 4.939598],
      [1652832000000, 4.969298],
      [1652918400000, 4.931497],
      [1653004800000, 4.881704],
      [1653091200000, 4.881704],
      [1653177600000, 4.8817],
      [1653264000000, 4.81501],
      [1653350400000, 4.819401],
      [1653436800000, 4.8243],
      [1653523200000, 4.769699],
      [1653609600000, 4.731041],
      [1653696000000, 4.731041],
      [1653782400000, 4.731098],
      [1653868800000, 4.753903],
      [1653955200000, 4.731896],
      [1654041600000, 4.81703],
      [1654128000000, 4.797201],
      [1654214400000, 4.774604],
      [1654300800000, 4.775041],
      [1654387200000, 4.776499],
      [1654473600000, 4.795697],
      [1654560000000, 4.871265],
      [1654646400000, 4.899602],
      [1654732800000, 4.904802],
      [1654819200000, 4.985435],
      [1654905600000, 4.987385],
      [1654992000000, 4.985499],
      [1655078400000, 5.114899],
      [1655164800000, 5.117597],
      [1655251200000, 5.053498],
      [1655337600000, 5.053701],
      [1655424000000, 5.153604],
      [1655510400000, 5.153919],
      [1655596800000, 5.153598],
      [1655683200000, 5.188704],
      [1655769600000, 5.124298],
      [1655856000000, 5.195099],
      [1655942400000, 5.239499],
      [1656028800000, 5.243504],
      [1656115200000, 5.243504],
      [1656201600000, 5.242899],
      [1656288000000, 5.238302],
      [1656374400000, 5.268102],
      [1656460800000, 5.182399],
      [1656547200000, 5.253501],
      [1656633600000, 5.33245],
      [1656720000000, 5.33245],
      [1656806400000, 5.3325],
      [1656892800000, 5.329796],
      [1656979200000, 5.386902],
      [1657065600000, 5.4299],
      [1657152000000, 5.339913],
      [1657238400000, 5.255504],
      [1657324800000, 5.255081],
      [1657411200000, 5.255081],
      [1657497600000, 5.354301],
      [1657584000000, 5.378497],
      [1657670400000, 5.3924],
      [1657756800000, 5.424299],
      [1657843200000, 5.407804],
      [1657929600000, 5.416973],
      [1658016000000, 5.4116],
      [1658102400000, 5.438302],
      [1658188800000, 5.414603],
      [1658275200000, 5.471703],
      [1658361600000, 5.499304],
      [1658448000000, 5.497804],
      [1658534400000, 5.496671],
      [1658620800000, 5.498203],
      [1658707200000, 5.357803],
      [1658793600000, 5.351601],
      [1658880000000, 5.244497],
      [1658966400000, 5.184198],
      [1659052800000, 5.172804],
      [1659139200000, 5.172804],
      [1659225600000, 5.172705],
      [1659312000000, 5.1855],
      [1659398400000, 5.279203],
      [1659484800000, 5.284199],
      [1659571200000, 5.2126],
      [1659657600000, 5.16605],
      [1659744000000, 5.164263],
      [1659830400000, 5.166099],
      [1659916800000, 5.111604],
      [1660003200000, 5.125197],
      [1660089600000, 5.095199],
      [1660176000000, 5.158502],
      [1660262400000, 5.076404],
      [1660348800000, 5.076404],
      [1660435200000, 5.076399],
      [1660521600000, 5.0971],
      [1660608000000, 5.145672],
      [1660694400000, 5.166505],
      [1660780800000, 5.168503],
      [1660867200000, 5.169904],
      [1660953600000, 5.167625],
      [1661040000000, 5.1699],
      [1661126400000, 5.157602],
      [1661212800000, 5.104987],
      [1661299200000, 5.111602],
      [1661385600000, 5.110302],
      [1661472000000, 5.06403],
      [1661558400000, 5.063122],
      [1661644800000, 5.06402],
      [1661731200000, 5.028698],
      [1661817600000, 5.123398],
      [1661904000000, 5.183302],
      [1661990400000, 5.241899],
      [1662076800000, 5.17245],
      [1662163200000, 5.17245],
      [1662249600000, 5.172502],
      [1662336000000, 5.155399],
      [1662422400000, 5.248697],
      [1662508800000, 5.248198],
      [1662595200000, 5.214798],
      [1662681600000, 5.147804],
      [1662768000000, 5.147904],
      [1662854400000, 5.147805],
      [1662940800000, 5.093497],
      [1663027200000, 5.191302],
      [1663113600000, 5.164204],
      [1663200000000, 5.247601],
      [1663286400000, 5.252143],
      [1663372800000, 5.253367],
      [1663459200000, 5.253367],
      [1663545600000, 5.253367],
      [1663632000000, 5.143005],
      [1663718400000, 5.171901],
      [1663804800000, 5.117398],
      [1663891200000, 5.265604],
      [1663977600000, 5.264726],
      [1664064000000, 5.260297],
      [1664150400000, 5.391032],
      [1664236800000, 5.379603],
      [1664323200000, 5.375704],
      [1664409600000, 5.397698],
      [1664496000000, 5.412471],
      [1664582400000, 5.412471],
      [1664668800000, 5.4158],
      [1664755200000, 5.165025],
      [1664841600000, 5.177296],
      [1664928000000, 5.196699],
      [1665014400000, 5.221897],
      [1665100800000, 5.205553],
      [1665187200000, 5.204403],
      [1665273600000, 5.199904],
      [1665360000000, 5.188303],
      [1665446400000, 5.293603],
      [1665532800000, 5.293012],
      [1665619200000, 5.261302],
      [1665705600000, 5.325218],
      [1665792000000, 5.325218],
      [1665878400000, 5.328896],
      [1665964800000, 5.281422],
      [1666051200000, 5.241299],
      [1666137600000, 5.270702],
      [1666224000000, 5.218102],
      [1666310400000, 5.162904],
      [1666396800000, 5.161958],
      [1666483200000, 5.1649],
      [1666569600000, 5.3077],
      [1666656000000, 5.316704],
      [1666742400000, 5.385402],
      [1666828800000, 5.340701],
      [1666915200000, 5.292657],
      [1667001600000, 5.292657],
      [1667088000000, 5.292657],
      [1667174400000, 5.180197],
      [1667260800000, 5.143597],
      [1667347200000, 5.144098],
      [1667433600000, 5.116401],
      [1667520000000, 5.056604],
      [1667606400000, 5.044204],
      [1667692800000, 5.082167],
      [1667779200000, 5.15732],
      [1667865600000, 5.144502],
      [1667952000000, 5.1409],
      [1668038400000, 5.345504],
      [1668124800000, 5.325204],
      [1668211200000, 5.303061],
      [1668297600000, 5.303061],
      [1668384000000, 5.332699],
      [1668470400000, 5.333301],
      [1668556800000, 5.400504],
      [1668643200000, 5.423595],
      [1668729600000, 5.383204],
      [1668816000000, 5.382804],
      [1668902400000, 5.382798],
      [1668988800000, 5.320353],
      [1669075200000, 5.359399],
      [1669161600000, 5.359799],
      [1669248000000, 5.321498],
      [1669334400000, 5.410104],
      [1669420800000, 5.410399],
      [1669507200000, 5.409428],
      [1669593600000, 5.366099],
      [1669680000000, 5.2697],
      [1669766400000, 5.185706],
      [1669852800000, 5.185104],
      [1669939200000, 5.219404],
      [1670025600000, 5.208626],
      [1670112000000, 5.219497],
      [1670198400000, 5.281497],
      [1670284800000, 5.235496],
      [1670371200000, 5.205498],
      [1670457600000, 5.2258],
      [1670544000000, 5.240504],
      [1670630400000, 5.238041],
      [1670716800000, 5.237971],
      [1670803200000, 5.3228],
      [1670889600000, 5.294301],
      [1670976000000, 5.278697],
      [1671062400000, 5.313301],
      [1671148800000, 5.314404],
      [1671235200000, 5.308521],
      [1671321600000, 5.308521],
      [1671408000000, 5.293104],
      [1671494400000, 5.202932],
      [1671580800000, 5.201404],
      [1671667200000, 5.167104],
      [1671753600000, 5.165704],
      [1671840000000, 5.165804],
      [1671926400000, 5.165801],
      [1672012800000, 5.219026],
      [1672099200000, 5.293797],
      [1672185600000, 5.268299],
      [1672272000000, 5.286097],
      [1672358400000, 5.286304],
      [1672444800000, 5.286704],
      [1672531200000, 5.286699],
      [1672617600000, 5.363878],
      [1672704000000, 5.480118],
      [1672790400000, 5.431601],
      [1672876800000, 5.351303],
      [1672963200000, 5.225804],
      [1673049600000, 5.225904],
      [1673136000000, 5.225898],
      [1673222400000, 5.255105],
      [1673308800000, 5.199794],
      [1673395200000, 5.159539],
      [1673481600000, 5.10895],
      [1673568000000, 5.096041],
      [1673654400000, 5.087704],
      [1673740800000, 5.087701],
      [1673827200000, 5.1475],
      [1673913600000, 5.1009],
      [1674000000000, 5.186803],
      [1674086400000, 5.174503],
      [1674172800000, 5.207904],
      [1674259200000, 5.207804],
      [1674345600000, 5.207799],
      [1674432000000, 5.208199],
      [1674518400000, 5.139899],
      [1674604800000, 5.073702],
      [1674691200000, 5.066417],
      [1674777600000, 5.109304],
      [1674864000000, 5.109204],
      [1674950400000, 5.109202],
      [1675036800000, 5.116295],
      [1675123200000, 5.0733],
      [1675209600000, 5.054992],
      [1675296000000, 5.050703],
      [1675382400000, 5.152504],
      [1675468800000, 5.151804],
      [1675555200000, 5.1518],
      [1675641600000, 5.147203],
      [1675728000000, 5.210801],
      [1675814400000, 5.201008],
      [1675900800000, 5.291007],
      [1675987200000, 5.215604],
      [1676073600000, 5.215142],
      [1676160000000, 5.215142],
      [1676246400000, 5.159898],
      [1676332800000, 5.192604],
      [1676419200000, 5.219499],
      [1676505600000, 5.218299],
      [1676592000000, 5.168041],
      [1676678400000, 5.166404],
      [1676764800000, 5.188564],
      [1676851200000, 5.168039],
      [1676937600000, 5.168022],
      [1677024000000, 5.152698],
      [1677110400000, 5.1377],
      [1677196800000, 5.210504],
      [1677283200000, 5.210404],
      [1677369600000, 5.210399],
      [1677456000000, 5.201201],
      [1677542400000, 5.2373],
      [1677628800000, 5.179802],
      [1677715200000, 5.201097],
      [1677801600000, 5.195804],
    ],
  },
];

const options: ApexOptions = {
  chart: {
    height: 350,
    type: "area",
    toolbar: {
      show: false,
    },
  },
  dataLabels: {
    enabled: false,
  },
  stroke: {
    curve: "straight",
  },
  yaxis: {
    tickAmount: 5,
    labels: {
      formatter: (value) => {
        return value.toFixed(1).replace(".", ",");
      },
    },
  },
  xaxis: {
    labels: {
      show: false,
    },
    tooltip: {
      enabled: false,
    },
    axisTicks: {
      show: false,
    },
  },
  fill: {
    gradient: {
      shadeIntensity: 1,
      opacityFrom: 0.7,
      opacityTo: 0.9,
      stops: [0, 100],
    },
  },
  colors: ["#7C3AED"],
  tooltip: {
    custom: function ({ series, seriesIndex, dataPointIndex, w }) {
      /* eslint-disable indent */
      return `
        <div class="tooltip">
          <span>
            ${Number(series[seriesIndex][dataPointIndex])
              .toFixed(2)
              .replace(".", ",")}
          </span>
          <span>
            ${new Date(
              w.globals.seriesX[seriesIndex][dataPointIndex]
            ).toLocaleDateString("pt-BR", {
              weekday: "short",
              month: "short",
              day: "numeric",
            })}
          </span>
        </div>
      `;
    },
  },
};

export function ExchangeRateChart() {
  return (
    <ExchangeRateChartContainer>
      <h2>Taxa de câmbio</h2>
      <Chart
        width="100%"
        height={356}
        type="area"
        options={options}
        series={series}
      />
      <ChartControls>
        <button>1D</button>
        <button>5D</button>
        <button>1M</button>
        <button className="active">1A</button>
        <button>5A</button>
        <button>Máx</button>
      </ChartControls>
    </ExchangeRateChartContainer>
  );
}
